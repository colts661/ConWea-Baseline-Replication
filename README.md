# ConWea Baseline Replication
In this project, we aim to replicate two baseline results from the [ConWea](#conwea) paper: IR-TF-IDF and [Word2Vec](#word2vec).

### Environment
- Option 1: Run the docker container: `docker run yaw006/conwea-rep:submit`;
- Option 2: Install all required packages in `requirements.txt`.

### Data
- Each dataset should contain following files, and placed in `data/`:
  - **DataFrame pickle file**
    - Example: ```data/nyt/coarse/df.pkl```
      - This dataset should contain two columns named ```sentence```, ```label```
      - ```sentence``` contains text and ```label``` contains its corresponding label.
      - Must be named as ```df.pkl```
  - **Seed Words JSON file**
    - Example: ```data/nyt/coarse/seedwords.json```
      - This json file contains seed words list for each label.
      - Must be named as ```seedwords.json```
- Currently existing datasets: `nyt/coarse, nyt/fine, 20news/coarse, 20news/fine`

### Commands
The main script is located in the root directory. It supports 3 targets:
- `test`: Run the test data. All other flags are ignored.
- `experiment` (or `exp`) [default]: Perform one run using configuration from `config/exp_<model>_config.json`.
- `hyperparameter` (or `ht`): Perform hyperparameter search using parameters from `config/ht_<model>_config.json`.

The two models supported are:
- `tfidf`: Run the TF-IDF model
- `w2v`: Run the Word2Vec model

The full command is:

```
python run.py [-h] test [-d DATA] [-m MODEL [...]] [-s] [-o] [-p]

optional arguments:

  -h, --help             show help message and exit
  -d, --data DATA        data path, default is `nyt/coarse`
  -m, --model MODEL      model. Supports `tfidf` and/or `w2v`. Need at least 1, default is both
  -s, --stem             whether to stem the corpus. Only used in `experiment` target
  -o, --output           whether to write result. Only used in `experiment` target
  -p, --plot             visualize document length distribution. Only used in `experiment` target
```

### Code File Outline
```
ConWea-Baseline-Replication/
├── run.py                           <- main script
├── config/                          <- model configuration JSON files
│   ├── exp_tfidf_config.json
│   ├── ht_tfidf_config.json
│   ├── test_w2v_config.json
│   └── ...
├── data/                            <- raw/preprocessed data files
│   ├── nyt
│   |   ├── coarse                   <- existing dataset: nyt/coarse
|   │   |   ├── df.pkl               <- required DataFrame pickle file
|   │   |   ├── seedwords.json       <- required seedwords JSON file
|   │   |   ├── corpus_stem.pkl      <- preprocessed corpus (generated by code)
|   │   |   └── labels.pkl           <- preprocessed labels (generated by code)
|   │   └── ...
|   └── ...
├── models/                          <- saved models
│   ├── new_ht                       <- newly saved models from tuning
│   ├── others                       <- newly saved models from experiments
│   └── tuned                        <- originally tuned models
├── plots/                           <- visualizations
├── results/                         <- code run results
│   ├── tfidf_ht.json
│   ├── tfidf_runs.json
|   └── ...
├── src/                             <- source code library
│   ├── data.py
│   ├── models.py
│   └── util.py
└── test/                            <- test target data
    └── testdata/
        ├── df.pkl
        ├── seedwords.json
        └── ...
```

---
### Citations
#### ConWea
```
@inproceedings{mekala-shang-2020-contextualized,
    title = "Contextualized Weak Supervision for Text Classification",
    author = "Mekala, Dheeraj  and
      Shang, Jingbo",
    booktitle = "Proceedings of the 58th Annual Meeting of the Association for Computational Linguistics",
    month = jul,
    year = "2020",
    address = "Online",
    publisher = "Association for Computational Linguistics",
    url = "https://www.aclweb.org/anthology/2020.acl-main.30",
    pages = "323--333",
    abstract = "Weakly supervised text classification based on a few user-provided seed words has recently attracted much attention from researchers. Existing methods mainly generate pseudo-labels in a context-free manner (e.g., string matching), therefore, the ambiguous, context-dependent nature of human language has been long overlooked. In this paper, we propose a novel framework ConWea, providing contextualized weak supervision for text classification. Specifically, we leverage contextualized representations of word occurrences and seed word information to automatically differentiate multiple interpretations of the same word, and thus create a contextualized corpus. This contextualized corpus is further utilized to train the classifier and expand seed words in an iterative manner. This process not only adds new contextualized, highly label-indicative keywords but also disambiguates initial seed words, making our weak supervision fully contextualized. Extensive experiments and case studies on real-world datasets demonstrate the necessity and significant advantages of using contextualized weak supervision, especially when the class labels are fine-grained.",
}
```

#### Word2Vec
```
@article{word2vec,
    title={Efficient estimation of word representations in vector space},
    author={Mikolov, Tomas and Chen, Kai and Corrado, Greg and Dean, Jeffrey},
    journal={arXiv preprint arXiv:1301.3781},
    year={2013}
}
```